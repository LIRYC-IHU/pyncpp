# Copyright (c) 2022 IHU Liryc, Universit√© de Bordeaux, Inria.
# License: BSD-3-Clause

include(ExternalProject)

PYNCPP_generate_external_project_directories(pyncpp_examples
    PYNCPP_EXAMPLES_PREFIX
    PYNCPP_EXAMPLES_DOWNLOAD_DIR
    _ignore
    PYNCPP_EXAMPLES_BINARY_DIR
    PYNCPP_EXAMPLES_STAMP_DIR
    PYNCPP_EXAMPLES_TMP_DIR
    )

set(PYNCPP_EXAMPLES_SOURCE_DIR "${CMAKE_CURRENT_SOURCE_DIR}/source")

ExternalProject_Get_property(pyncpp BINARY_DIR)
set(PYNCPP_DIR ${BINARY_DIR})

set(cmake_args
    -D "CMAKE_BUILD_TYPE:STRING=${CMAKE_BUILD_TYPE}"
    -D "CMAKE_MODULE_PATH:PATH=${PROJECT_SOURCE_DIR}/cmake"
    -D "PYNCPP_DIR:PATH=${PYNCPP_DIR}"
    )

ExternalProject_Add(pyncpp_examples
    DEPENDS pyncpp
    DOWNLOAD_COMMAND ""
    INSTALL_COMMAND ""
    CMAKE_ARGS ${cmake_args}
    PREFIX "${PYNCPP_EXAMPLES_PREFIX}"
    DOWNLOAD_DIR "${PYNCPP_EXAMPLES_DOWNLOAD_DIR}"
    SOURCE_DIR "${PYNCPP_EXAMPLES_SOURCE_DIR}"
    BINARY_DIR "${PYNCPP_EXAMPLES_BINARY_DIR}"
    STAMP_DIR "${PYNCPP_EXAMPLES_STAMP_DIR}"
    TMP_DIR "${PYNCPP_EXAMPLES_TMP_DIR}"
    )
